<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR" xml:lang="pt-BR"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.23">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>9&nbsp; Transformações nas Variáveis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 1em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./mrls_compara.html" rel="next">
<link href="./mrls_diagnostico.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1fe81d0376b2c50856e68e651e390326.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-70a47bd5681a7291082a5b9f83d58762.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Nenhum resultado",
    "search-matching-documents-text": "documentos correspondentes",
    "search-copy-link-title": "Copiar link para a busca",
    "search-hide-matches-text": "Esconder correspondências adicionais",
    "search-more-match-text": "mais correspondência neste documento",
    "search-more-matches-text": "mais correspondências neste documento",
    "search-clear-button-title": "Limpar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Procurar"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./mrls.html">Parte II — Modelo de Regressão Linear Simples (MRLS)</a></li><li class="breadcrumb-item"><a href="./mrls_transf.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Transformações nas Variáveis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Procurar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Procurar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Informações Legais e Declaração de Uso de Inteligência Artificial</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prefacio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefácio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./identifica.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Identificação da Disciplina</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte I — Modelagem</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introdução e Panorama dos Modelos de Regressão</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./modelagem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Modelagem Estatística e Regressão</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part1_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Exercícios e Atividades de Consolidação</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte II — Modelo de Regressão Linear Simples (MRLS)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">O MRLS como Modelo para a Média Condicional</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls_emq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Estimação por Mínimos Quadrados no MRLS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls_inferencia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Inferência no MRLS com erros normais</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls_testes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Testes de hipóteses e ANOVA</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls_diagnostico.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Diagnóstico e Avaliação no MRLS</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls_transf.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Transformações nas Variáveis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mrls_compara.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Comparação de Modelos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part2_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Exercícios e Atividades de Consolidação</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte III — Modelo de Regressão Linear Simples (MRLM)</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part3_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Exercícios e Atividades de Consolidação</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Parte IV — Apêndices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Alternar seção">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ap_listas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Lista de Siglas e Símbolos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ap_matrizes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Estrutura Matricial dos Modelos de Regressão Linear</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ap_normal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Distribuição Normal</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ap_forma_linear.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Formas Lineares e Quadráticas na Normal Multivariada</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ap_tratamento.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Tratamento de dados para regressão</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./part4_ex.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Exercícios e Atividades de Consolidação</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Referências</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#motivação" id="toc-motivação" class="nav-link active" data-scroll-target="#motivação"><span class="header-section-number">9.1</span> Motivação</a></li>
  <li><a href="#transformações-na-variável-resposta-y" id="toc-transformações-na-variável-resposta-y" class="nav-link" data-scroll-target="#transformações-na-variável-resposta-y"><span class="header-section-number">9.2</span> Transformações na variável resposta (<span class="math inline">\(Y\)</span>)</a>
  <ul class="collapse">
  <li><a href="#transformação-e-distribuição-implícita" id="toc-transformação-e-distribuição-implícita" class="nav-link" data-scroll-target="#transformação-e-distribuição-implícita"><span class="header-section-number">9.2.1</span> Transformação e distribuição implícita</a></li>
  <li><a href="#logaritmo-y-log-y" id="toc-logaritmo-y-log-y" class="nav-link" data-scroll-target="#logaritmo-y-log-y"><span class="header-section-number">9.2.2</span> Logaritmo (<span class="math inline">\(Y^* = \log Y\)</span>)</a></li>
  <li><a href="#raiz-quadrada-y-sqrty" id="toc-raiz-quadrada-y-sqrty" class="nav-link" data-scroll-target="#raiz-quadrada-y-sqrty"><span class="header-section-number">9.2.3</span> Raiz quadrada (<span class="math inline">\(Y^* = \sqrt{Y}\)</span>)</a></li>
  <li><a href="#inverso-y-1y" id="toc-inverso-y-1y" class="nav-link" data-scroll-target="#inverso-y-1y"><span class="header-section-number">9.2.4</span> Inverso (<span class="math inline">\(Y^* = 1/Y\)</span>)</a></li>
  <li><a href="#quadrado-y-y2" id="toc-quadrado-y-y2" class="nav-link" data-scroll-target="#quadrado-y-y2"><span class="header-section-number">9.2.5</span> Quadrado (<span class="math inline">\(Y^* = Y^2\)</span>)</a></li>
  </ul></li>
  <li><a href="#transformações-na-variável-explicativa-x" id="toc-transformações-na-variável-explicativa-x" class="nav-link" data-scroll-target="#transformações-na-variável-explicativa-x"><span class="header-section-number">9.3</span> Transformações na variável explicativa (<span class="math inline">\(X\)</span>)</a>
  <ul class="collapse">
  <li><a href="#motivação-estatística" id="toc-motivação-estatística" class="nav-link" data-scroll-target="#motivação-estatística"><span class="header-section-number">9.3.1</span> Motivação estatística</a></li>
  <li><a href="#logaritmo-x-log-x" id="toc-logaritmo-x-log-x" class="nav-link" data-scroll-target="#logaritmo-x-log-x"><span class="header-section-number">9.3.2</span> Logaritmo (<span class="math inline">\(X^* = \log X\)</span>)</a></li>
  <li><a href="#inverso-x-1x" id="toc-inverso-x-1x" class="nav-link" data-scroll-target="#inverso-x-1x"><span class="header-section-number">9.3.3</span> Inverso (<span class="math inline">\(X^* = 1/X\)</span>)</a></li>
  <li><a href="#potências-e-termos-polinomiais-x2-x3" id="toc-potências-e-termos-polinomiais-x2-x3" class="nav-link" data-scroll-target="#potências-e-termos-polinomiais-x2-x3"><span class="header-section-number">9.3.4</span> Potências e termos polinomiais (<span class="math inline">\(X^2\)</span>, <span class="math inline">\(X^3\)</span>, …)</a></li>
  <li><a href="#transformar-x-ou-adicionar-polinômios" id="toc-transformar-x-ou-adicionar-polinômios" class="nav-link" data-scroll-target="#transformar-x-ou-adicionar-polinômios"><span class="header-section-number">9.3.5</span> Transformar <span class="math inline">\(X\)</span> ou adicionar polinômios?</a></li>
  </ul></li>
  <li><a href="#guia-prático-escolhendo-a-transformação" id="toc-guia-prático-escolhendo-a-transformação" class="nav-link" data-scroll-target="#guia-prático-escolhendo-a-transformação"><span class="header-section-number">9.4</span> Guia prático: escolhendo a transformação</a></li>
  <li><a href="#exemplo-ilustrativo-antes-e-depois-da-transformação" id="toc-exemplo-ilustrativo-antes-e-depois-da-transformação" class="nav-link" data-scroll-target="#exemplo-ilustrativo-antes-e-depois-da-transformação"><span class="header-section-number">9.5</span> Exemplo ilustrativo: antes e depois da transformação</a>
  <ul class="collapse">
  <li><a href="#cenário-e-especificação-dos-modelos" id="toc-cenário-e-especificação-dos-modelos" class="nav-link" data-scroll-target="#cenário-e-especificação-dos-modelos"><span class="header-section-number">9.5.1</span> Cenário e especificação dos modelos</a></li>
  <li><a href="#geração-do-conjunto-de-dados-e-análise-descritiva" id="toc-geração-do-conjunto-de-dados-e-análise-descritiva" class="nav-link" data-scroll-target="#geração-do-conjunto-de-dados-e-análise-descritiva"><span class="header-section-number">9.5.2</span> Geração do conjunto de dados e análise descritiva</a></li>
  <li><a href="#diagnóstico-gráfico-antes-e-depois" id="toc-diagnóstico-gráfico-antes-e-depois" class="nav-link" data-scroll-target="#diagnóstico-gráfico-antes-e-depois"><span class="header-section-number">9.5.3</span> Diagnóstico gráfico: antes e depois</a></li>
  <li><a href="#comparação-numérica-e-conclusão" id="toc-comparação-numérica-e-conclusão" class="nav-link" data-scroll-target="#comparação-numérica-e-conclusão"><span class="header-section-number">9.5.4</span> Comparação numérica e conclusão</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./mrls.html">Parte II — Modelo de Regressão Linear Simples (MRLS)</a></li><li class="breadcrumb-item"><a href="./mrls_transf.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Transformações nas Variáveis</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Transformações nas Variáveis</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="motivação" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="motivação"><span class="header-section-number">9.1</span> Motivação</h2>
<p>Quando os <strong>gráficos de resíduos</strong> revelam padrões sistemáticos, heteroscedasticidade ou violações de normalidade, é sinal de que a especificação do modelo pode estar inadequada. Em termos formais, isso significa que ao menos uma das hipóteses centrais do MRLS — linearidade da função média, homoscedasticidade ou normalidade dos erros — pode não estar sendo satisfeita (<span class="citation" data-cites="montgomery2021">Montgomery; Peck; Vining (<a href="references.html#ref-montgomery2021" role="doc-biblioref">2021</a>)</span>; <span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>).</p>
<p>A regressão linear simples assume que</p>
<p><span class="math display">\[
E(Y \mid X) = \beta_0 + \beta_1 X
\quad \text{e} \quad
Var(Y \mid X) = \sigma^2,
\]</span></p>
<p>ou seja, uma <strong>relação linear na média</strong> e <strong>variância constante</strong> condicionalmente a <span class="math inline">\(X\)</span>. Quando os resíduos exibem padrões como funil (variância crescente), curvaturas sistemáticas ou forte assimetria, o modelo ajustado não está capturando adequadamente a estrutura do processo gerador dos dados.</p>
<p>Uma das abordagens mais tradicionais para lidar com tais situações é aplicar <strong>transformações matemáticas</strong> às variáveis, de modo a:</p>
<ul>
<li>estabilizar a variância;</li>
<li>aproximar a normalidade dos erros;</li>
<li>linearizar a relação entre as variáveis;</li>
<li>tornar a interpretação estatística mais coerente com a estrutura do fenômeno estudado.</li>
</ul>
<p>Há duas formas de realizar tais transformações:<br>
(a) na variável resposta (<span class="math inline">\(Y\)</span>) e<br>
(b) na variável explicativa (<span class="math inline">\(X\)</span>).</p>
<p>Note que, ao aplicarmos uma transformação de variáveis, estamos implicitamente redefinindo o modelo estatístico. Por exemplo, ao transformar <span class="math inline">\(Y\)</span> em <span class="math inline">\(\log(Y)\)</span>, deixamos de modelar diretamente <span class="math inline">\(E(Y \mid X)\)</span> e passamos a modelar <span class="math inline">\(E(\log Y \mid X)\)</span>. Isso altera a interpretação dos coeficientes, a distribuição assumida para os erros e, em certos casos, a própria classe de modelos implícita (<span class="citation" data-cites="weisberg2005">Weisberg (<a href="references.html#ref-weisberg2005" role="doc-biblioref">2005</a>)</span>; <span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>).</p>
<p>Portanto, transformações devem ser motivadas por evidência empírica (diagnóstico de resíduos) e, sempre que possível, por fundamentação teórica do fenômeno estudado. Aplicá-las de forma automática pode melhorar métricas numéricas de ajuste, mas comprometer a interpretação do modelo.</p>
<p>Além disso, a aplicação de uma transformação implica um novo ciclo completo de análise:</p>
<ol type="1">
<li>Ajustar o modelo transformado.<br>
</li>
<li>Reavaliar os resíduos.<br>
</li>
<li>Verificar se as hipóteses agora são plausíveis.</li>
</ol>
<p>Esse processo é inerentemente iterativo.</p>
<p>Quando a transformação envolve apenas mudanças algébricas simples (como logaritmo ou raiz quadrada), as justificativas formais podem ser entendidas via propriedades de variância e distribuições conhecidas; demonstrações mais técnicas dessas propriedades podem ser consultadas no Apêndice de Demonstrações {#demo}.</p>
<p>Nas seções seguintes, analisaremos separadamente as transformações aplicadas à variável resposta e à variável explicativa, enfatizando sua motivação estatística e suas implicações interpretativas.</p>
</section>
<section id="transformações-na-variável-resposta-y" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="transformações-na-variável-resposta-y"><span class="header-section-number">9.2</span> Transformações na variável resposta (<span class="math inline">\(Y\)</span>)</h2>
<p>As transformações na variável resposta têm como objetivo principal modificar a <strong>estrutura probabilística condicional de <span class="math inline">\(Y\)</span> dado <span class="math inline">\(X\)</span></strong>. Em muitos contextos aplicados, a violação das hipóteses do MRLS decorre não da forma funcional da média, mas do comportamento da variância ou da distribuição dos erros.</p>
<p>Recordando que o MRLS assume <span class="math inline">\(Var(Y \mid X) = \sigma^2\)</span>,qualquer evidência de que</p>
<p><span class="math display">\[
Var(Y \mid X) \neq \text{constante}
\]</span></p>
<p>ou que os erros apresentam forte assimetria ou caudas pesadas pode motivar uma transformação em <span class="math inline">\(Y\)</span> (<span class="citation" data-cites="montgomery2021">Montgomery; Peck; Vining (<a href="references.html#ref-montgomery2021" role="doc-biblioref">2021</a>)</span>; <span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>; <span class="citation" data-cites="weisberg2005">Weisberg (<a href="references.html#ref-weisberg2005" role="doc-biblioref">2005</a>)</span>).</p>
<p>Para exemplificar, suponha que a variância condicional dependa da média:</p>
<p><span class="math display">\[
Var(Y \mid X) = g\big(E(Y \mid X)\big),
\]</span></p>
<p>para alguma função <span class="math inline">\(g(\cdot)\)</span> crescente. Isso ocorre, por exemplo:</p>
<ul>
<li>quando a variância é proporcional à média (dados de contagem);</li>
<li>quando a variância cresce aproximadamente com o quadrado da média (dados positivos e assimétricos);</li>
<li>quando há padrão de funil nos resíduos vs.&nbsp;ajustados.</li>
</ul>
<p>Nesse cenário, podemos buscar uma transformação <span class="math inline">\(Y^* = h(Y)\)</span> tal que</p>
<p><span class="math display">\[
Var(Y^* \mid X) \approx \text{constante}.
\]</span></p>
<p>Esse princípio é conhecido como <strong>estabilização da variância</strong>, e sua justificativa formal pode ser obtida por expansão de Taylor de primeira ordem (ver Apêndice de Demonstrações {#demo}).</p>
<p>É importante destacar que transformar <span class="math inline">\(Y\)</span> altera simultaneamente: - a escala da resposta; - a forma da distribuição condicional; - a interpretação dos coeficientes.</p>
<p>Portanto, não estamos apenas “melhorando resíduos”, mas redefinindo o modelo estatístico.</p>
<section id="transformação-e-distribuição-implícita" class="level3" data-number="9.2.1">
<h3 data-number="9.2.1" class="anchored" data-anchor-id="transformação-e-distribuição-implícita"><span class="header-section-number">9.2.1</span> Transformação e distribuição implícita</h3>
<p>Se ajustamos o modelo</p>
<p><span class="math display">\[
Y_i^* = h(Y_i) = \beta_0^* + \beta_1^* X_i + \varepsilon_i,
\quad \varepsilon_i \sim N(0,\sigma^2),
\]</span></p>
<p>então estamos assumindo normalidade <strong>na escala transformada</strong>.</p>
<p>Isso implica que, na escala original, <span class="math inline">\(Y\)</span> possui distribuição derivada da transformação inversa. Por exemplo:</p>
<ul>
<li>se <span class="math inline">\(h(Y)=\log Y\)</span>, então <span class="math inline">\(Y\)</span> é log-normal condicionalmente a <span class="math inline">\(X\)</span>;</li>
<li>se <span class="math inline">\(h(Y)=\sqrt Y\)</span>, a distribuição resultante não é normal na escala original, mas a variância pode se tornar aproximadamente constante;</li>
<li>se <span class="math inline">\(h(Y)=1/Y\)</span>, a estrutura média passa a ser modelada em termos do inverso da resposta.</li>
</ul>
<p>Essa mudança tem implicações importantes para:</p>
<ul>
<li>interpretação de coeficientes;</li>
<li>construção de intervalos de confiança;</li>
<li>previsão na escala original.</li>
</ul>
<p>Ao transformar <span class="math inline">\(Y\)</span>, a hipótese de normalidade passa a ser avaliada na nova escala. Isso significa que testes <span class="math inline">\(t\)</span>, testes <span class="math inline">\(F\)</span> e intervalos de confiança são válidos sob a suposição de normalidade dos erros na escala transformada, não necessariamente na escala original (<span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>).</p>
<p>Nas subseções seguintes, discutiremos transformações específicas, a saber, logaritmo, raiz quadrada, inverso e potência.</p>
</section>
<section id="logaritmo-y-log-y" class="level3" data-number="9.2.2">
<h3 data-number="9.2.2" class="anchored" data-anchor-id="logaritmo-y-log-y"><span class="header-section-number">9.2.2</span> Logaritmo (<span class="math inline">\(Y^* = \log Y\)</span>)</h3>
<p>A transformação logarítmica é uma das mais utilizadas em regressão, especialmente quando <span class="math inline">\(Y\)</span> é <strong>positiva</strong> e apresenta <strong>assimetria à direita</strong> ou variância crescente com o nível médio.</p>
<p>Se ajustamos o modelo</p>
<p><span class="math display">\[
Y_i^* = \log(Y_i) = \beta_0^* + \beta_1^* X_i + \varepsilon_i,
\quad \varepsilon_i \sim N(0, \sigma^2),
\]</span></p>
<p>estamos assumindo normalidade dos erros <strong>na escala logarítmica</strong>. Isso implica que, condicionalmente a <span class="math inline">\(X_i\)</span>, a variável original <span class="math inline">\(Y_i\)</span> segue uma <strong>distribuição log-normal</strong> (<span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>; <span class="citation" data-cites="weisberg2005">Weisberg (<a href="references.html#ref-weisberg2005" role="doc-biblioref">2005</a>)</span>).</p>
<p>Mais precisamente, se</p>
<p><span class="math display">\[
\log(Y_i) \mid X_i \sim N(\mu_i, \sigma^2),
\]</span></p>
<p>então</p>
<p><span class="math display">\[
Y_i \mid X_i \sim \text{LogNormal}(\mu_i, \sigma^2).
\]</span></p>
<p>A transformação logarítmica converte relações multiplicativas em aditivas. Se, na escala original,</p>
<p><span class="math display">\[
Y = \alpha \exp(\beta X) \cdot U,
\]</span></p>
<p>onde <span class="math inline">\(U\)</span> é um termo multiplicativo de erro, então</p>
<p><span class="math display">\[
\log Y = \log \alpha + \beta X + \log U,
\]</span></p>
<p>ou seja, o modelo passa a ter estrutura linear com erro aditivo na escala transformada.</p>
<p>Isso significa que o logaritmo é particularmente adequado quando:</p>
<ul>
<li>a variabilidade é proporcional ao nível médio;</li>
<li>o crescimento é aproximadamente exponencial;</li>
<li>o erro atua de forma <strong>multiplicativa</strong> na escala original.</li>
</ul>
<p>No modelo</p>
<p><span class="math display">\[
E[\log(Y) \mid X] = \beta_0^* + \beta_1^* X,
\]</span></p>
<p>o coeficiente <span class="math inline">\(\beta_1^*\)</span> representa a variação <strong>aditiva no logaritmo da resposta</strong> para cada unidade adicional em <span class="math inline">\(X\)</span>.</p>
<p>Na escala original,</p>
<p><span class="math display">\[
E(Y\mid X) = \exp(\beta_0^*) \cdot \exp(\beta_1^* X).
\]</span></p>
<p>Assim, um aumento de 1 unidade em <span class="math inline">\(X\)</span> multiplica o valor esperado de <span class="math inline">\(Y\)</span> por <span class="math inline">\(\exp(\beta_1^*)\)</span>.</p>
<p>Para valores pequenos de <span class="math inline">\(\beta_1^*\)</span>, podemos usar a aproximação</p>
<p><span class="math display">\[
\exp(\beta_1^*) \approx 1 + \beta_1^*,
\]</span></p>
<p>o que leva à interpretação aproximada de que <span class="math inline">\(\beta_1^* \times 100\%\)</span> representa uma variação percentual em <span class="math inline">\(Y\)</span> para cada unidade de <span class="math inline">\(X\)</span>.</p>
<p>Essa interpretação percentual é uma aproximação válida apenas quando <span class="math inline">\(|\beta_1^*|\)</span> é pequeno. O efeito exato é multiplicativo e deve ser interpretado via <span class="math inline">\(\exp(\beta_1^*)\)</span>.</p>
<section id="variância-e-estabilização" class="level4" data-number="9.2.2.1">
<h4 data-number="9.2.2.1" class="anchored" data-anchor-id="variância-e-estabilização"><span class="header-section-number">9.2.2.1</span> Variância e estabilização</h4>
<p>Se a variância cresce aproximadamente de forma proporcional ao quadrado da média,</p>
<p><span class="math display">\[
Var(Y \mid X) \propto [E(Y \mid X)]^2,
\]</span></p>
<p>então a transformação logarítmica tende a produzir variância aproximadamente constante na escala transformada.</p>
<p><strong>Advertência sobre retransformação</strong></p>
<p>Ao obter previsões na escala original, não é correto simplesmente calcular</p>
<p><span class="math display">\[
\widehat{Y} = \exp(\widehat{\log Y}),
\]</span></p>
<p>pois, para variável log-normal,</p>
<p><span class="math display">\[
E(Y \mid X) = \exp(\mu + \tfrac{1}{2}\sigma^2),
\]</span></p>
<p>e não apenas <span class="math inline">\(\exp(\mu)\)</span> (<span class="citation" data-cites="casella2002">Casella; Berger (<a href="references.html#ref-casella2002" role="doc-biblioref">2002</a>)</span>). Ignorar esse termo pode introduzir <strong>viés de retransformação</strong>.</p>
<p><strong>Quando usar</strong></p>
<ul>
<li>Resíduos vs.&nbsp;ajustados exibem padrão de funil.</li>
<li>Histograma dos resíduos apresenta assimetria à direita.</li>
<li>QQ-plot mostra caudas pesadas superiores.</li>
<li>Relação parece exponencial na escala original.</li>
</ul>
<p><strong>Gráficos sugeridos para verificação:</strong></p>
<ul>
<li><p>Resíduos vs.&nbsp;<span class="math inline">\(\hat Y\)</span> (o que verificar: formato de funil; resultado esperado após transformação: dispersão homogênea).&nbsp;</p></li>
<li><p>QQ-plot dos resíduos (o que verificar: caudas pesadas; resultado esperado após transformação: alinhamento mais próximo à reta).&nbsp;</p></li>
<li><p>Histograma dos resíduos (o que verificar: assimetria; aresultado esperado após transformação: formato mais próximo da normal).</p></li>
</ul>
</section>
</section>
<section id="raiz-quadrada-y-sqrty" class="level3" data-number="9.2.3">
<h3 data-number="9.2.3" class="anchored" data-anchor-id="raiz-quadrada-y-sqrty"><span class="header-section-number">9.2.3</span> Raiz quadrada (<span class="math inline">\(Y^* = \sqrt{Y}\)</span>)</h3>
<p>A transformação pela raiz quadrada é frequentemente utilizada quando <span class="math inline">\(Y\)</span> representa <strong>contagens</strong> ou frequências.</p>
<p>Por exemplo, se <span class="math inline">\(Y_i \sim \text{Poisson}(\mu_i)\)</span>, então</p>
<p><span class="math display">\[
E(Y_i) = \mu_i,
\quad
Var(Y_i) = \mu_i,
\]</span></p>
<p>ou seja, a variância é proporcional à média.</p>
<p>Aplicando a transformação</p>
<p><span class="math display">\[
Y_i^* = \sqrt{Y_i},
\]</span></p>
<p>e utilizando aproximação por expansão de Taylor, obtém-se</p>
<p><span class="math display">\[
Var(Y_i^*) \approx \frac{1}{4},
\]</span></p>
<p>que é aproximadamente constante e independe de <span class="math inline">\(\mu_i\)</span> (ver Apêndice de Demonstrações {#demo}).</p>
<p>Note que a raiz quadrada reduz a assimetria típica de distribuições de contagem e estabiliza a variância quando esta é proporcional à média.</p>
<p>O modelo passa então a explicar a variação na <strong>raiz da resposta</strong>, não na resposta original. Isso altera a escala e deve ser explicitado ao interpretar coeficientes.</p>
<p><strong>Quando usar</strong></p>
<ul>
<li>Dados de contagem.</li>
<li>Variância aproximadamente proporcional à média.</li>
<li>Histograma com cauda longa à direita.</li>
</ul>
<p><strong>Gráficos sugeridos para verificação:</strong></p>
<ul>
<li><p>Histograma dos resíduos (o que verificar: cauda longa; resultado esperado após transformação: simetria).&nbsp;</p></li>
<li><p>Resíduos vs.&nbsp;<span class="math inline">\(\hat Y\)</span> (o que verificar: variância crescente; resultado esperado após transformação: dispersão estável).</p></li>
</ul>
</section>
<section id="inverso-y-1y" class="level3" data-number="9.2.4">
<h3 data-number="9.2.4" class="anchored" data-anchor-id="inverso-y-1y"><span class="header-section-number">9.2.4</span> Inverso (<span class="math inline">\(Y^* = 1/Y\)</span>)</h3>
<p>A transformação inversa é útil quando a relação entre <span class="math inline">\(Y\)</span> e <span class="math inline">\(X\)</span> apresenta comportamento do tipo <strong>decaimento rápido em direção a um limite</strong>.</p>
<p>Se a relação original for não linear, por exemplo,</p>
<p><span class="math display">\[
Y = \frac{1}{\alpha + \beta X},
\]</span></p>
<p>então</p>
<p><span class="math display">\[
\frac{1}{Y} = \alpha + \beta X,
\]</span></p>
<p>que é linear.</p>
<p>Essa transformação é comum em fenômenos físicos e biológicos nos quais a resposta diminui rapidamente e depois se estabiliza.</p>
<p>O modelo ajustado explica o comportamento do <strong>inverso da resposta</strong>. A interpretação substantiva deve ser feita com cuidado, pois aumentos em <span class="math inline">\(X\)</span> passam a produzir efeitos lineares sobre <span class="math inline">\(1/Y\)</span>, e não diretamente sobre <span class="math inline">\(Y\)</span>.</p>
<p><strong>Quando usar</strong></p>
<p>Modelos onde a resposta diminui de forma não linear (ex.: tempo de reação decrescendo com aumento de dose).</p>
<p><strong>Gráficos sugeridos para verificação:</strong></p>
<ul>
<li><p>Resíduos vs.&nbsp;<span class="math inline">\(X\)</span> (o que verificar: padrão curvilíneo; resultado esperado após transformação: dispersão aleatória).&nbsp;</p></li>
<li><p>QQ-plot dos resíduos (o que verificar: forte desvio; resultado esperado após transformação: mais alinhado).</p></li>
</ul>
</section>
<section id="quadrado-y-y2" class="level3" data-number="9.2.5">
<h3 data-number="9.2.5" class="anchored" data-anchor-id="quadrado-y-y2"><span class="header-section-number">9.2.5</span> Quadrado (<span class="math inline">\(Y^* = Y^2\)</span>)</h3>
<p>A transformação quadrática pode ser útil quando a variabilidade é maior em valores pequenos de <span class="math inline">\(Y\)</span> ou quando a relação é convexa na escala original.</p>
<p>Ao elevar <span class="math inline">\(Y\)</span> ao quadrado, ampliamos diferenças em níveis mais altos da resposta, o que pode reduzir padrões estruturais nos resíduos.</p>
<p>Essa transformação modifica significativamente a escala e deve ser utilizada apenas quando há justificativa empírica clara nos gráficos de resíduos.</p>
<p><strong>Gráficos sugeridos para verificação:</strong></p>
<ul>
<li><p>Resíduos vs.&nbsp;<span class="math inline">\(\hat Y\)</span> (o que verificar: padrão em arco; resultado esperado após transformação: dispersão homogênea).&nbsp;</p></li>
<li><p>Histograma dos resíduos (o que verificar: concentração em torno de 0; resultado esperado após transformação: mais espalhado).</p></li>
</ul>
</section>
</section>
<section id="transformações-na-variável-explicativa-x" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="transformações-na-variável-explicativa-x"><span class="header-section-number">9.3</span> Transformações na variável explicativa (<span class="math inline">\(X\)</span>)</h2>
<p>As transformações na variável explicativa têm como objetivo principal <strong>linearizar a relação entre <span class="math inline">\(X\)</span> e a média condicional de <span class="math inline">\(Y\)</span></strong>, preservando, quando possível, a estrutura de variância constante dos erros.</p>
<p>Recordando que o MRLS assume <span class="math inline">\(E(Y \mid X) = \beta_0 + \beta_1 X\)</span>, portanto, qualquer evidência de que a relação média entre <span class="math inline">\(Y\)</span> e <span class="math inline">\(X\)</span> não é linear, por exemplo, presença de curvatura sistemática no gráfico de resíduos vs.&nbsp;<span class="math inline">\(X\)</span>, sugere que a especificação funcional pode estar inadequada (<span class="citation" data-cites="montgomery2021">Montgomery; Peck; Vining (<a href="references.html#ref-montgomery2021" role="doc-biblioref">2021</a>)</span>; <span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>).</p>
<p>Nesse caso, buscamos uma transformação <span class="math inline">\(X^* = h(X)\)</span> tal que</p>
<p><span class="math display">\[
E(Y \mid X^*) = \beta_0 + \beta_1 X^*
\]</span></p>
<p>represente melhor a estrutura média do fenômeno.</p>
<p>Transformar <span class="math inline">\(X\)</span> significa alterar a <strong>forma funcional da regressão</strong> em relação à variável <span class="math inline">\(X\)</span>, mas não a natureza probabilística da variável resposta. Diferentemente das transformações em <span class="math inline">\(Y\)</span>, aqui a distribuição condicional de <span class="math inline">\(Y\)</span> não é redefinida; apenas modificamos a forma como a média depende da variável explicativa.</p>
<p>Portanto:</p>
<ul>
<li>Transformações em <span class="math inline">\(Y\)</span> → alteram a escala da resposta e a estrutura probabilística.<br>
</li>
<li>Transformações em <span class="math inline">\(X\)</span> → alteram a forma funcional da média em relação à variável <span class="math inline">\(X\)</span>.</li>
</ul>
<section id="motivação-estatística" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="motivação-estatística"><span class="header-section-number">9.3.1</span> Motivação estatística</h3>
<p>Se o gráfico de resíduos vs.&nbsp;<span class="math inline">\(X\)</span> exibe:</p>
<ul>
<li>padrão em arco (concavidade ou convexidade),</li>
<li>forma em S,</li>
<li>tendência sistemática crescente ou decrescente,</li>
</ul>
<p>então o modelo linear <span class="math inline">\(\beta_0 + \beta_1 X\)</span> não está capturando adequadamente a relação entre as variáveis. A solução é buscar uma transformação <span class="math inline">\(h(X)\)</span> tal que a nova relação seja aproximadamente linear.</p>
<p>Essa estratégia é coerente com o princípio geral de modelagem estatística: <strong>especificar corretamente a função média antes de avaliar a variância dos erros</strong> (<span class="citation" data-cites="weisberg2005">Weisberg (<a href="references.html#ref-weisberg2005" role="doc-biblioref">2005</a>)</span>).</p>
</section>
<section id="logaritmo-x-log-x" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="logaritmo-x-log-x"><span class="header-section-number">9.3.2</span> Logaritmo (<span class="math inline">\(X^* = \log X\)</span>)</h3>
<p>A transformação logarítmica em <span class="math inline">\(X\)</span> é apropriada quando a relação entre <span class="math inline">\(Y\)</span> e <span class="math inline">\(X\)</span> apresenta comportamento de crescimento proporcional ou lei de potência.</p>
<p>Suponha que a relação verdadeira seja</p>
<p><span class="math display">\[
Y = \alpha X^\beta + \varepsilon.
\]</span></p>
<p>Tomando logaritmo em ambos os lados (desconsiderando momentaneamente o erro),</p>
<p><span class="math display">\[
\log Y = \log \alpha + \beta \log X.
\]</span></p>
<p>Se também transformarmos <span class="math inline">\(Y\)</span>, obtemos o chamado modelo <strong>log-log</strong>, amplamente utilizado em econometria.</p>
<p>No entanto, mesmo sem transformar <span class="math inline">\(Y\)</span>, pode ser apropriado modelar</p>
<p><span class="math display">\[
Y = \beta_0 + \beta_1 \log X + \varepsilon,
\]</span></p>
<p>quando o efeito de <span class="math inline">\(X\)</span> diminui à medida que <span class="math inline">\(X\)</span> cresce.</p>
<p>Observe que no modelo</p>
<p><span class="math display">\[
Y = \beta_0 + \beta_1 \log X,
\]</span></p>
<p>o coeficiente <span class="math inline">\(\beta_1\)</span> representa a variação média em <span class="math inline">\(Y\)</span> associada a uma variação proporcional em <span class="math inline">\(X\)</span>. Mais especificamente, um aumento percentual em <span class="math inline">\(X\)</span> está associado a uma variação aproximadamente linear em <span class="math inline">\(Y\)</span>.</p>
<p>Portanto, a transformação logarítmica em <span class="math inline">\(X\)</span> não implica mudança na distribuição de <span class="math inline">\(Y\)</span>.</p>
<p><strong>Gráfico sugerido:</strong></p>
<ul>
<li>Resíduos vs.&nbsp;<span class="math inline">\(X\)</span> (o que verificar: curva sistemática; resultado esperado após transformação: dispersão aleatória).</li>
</ul>
</section>
<section id="inverso-x-1x" class="level3" data-number="9.3.3">
<h3 data-number="9.3.3" class="anchored" data-anchor-id="inverso-x-1x"><span class="header-section-number">9.3.3</span> Inverso (<span class="math inline">\(X^* = 1/X\)</span>)</h3>
<p>A transformação inversa é adequada quando o efeito de <span class="math inline">\(X\)</span> é muito forte para valores pequenos e diminui rapidamente conforme <span class="math inline">\(X\)</span> aumenta.</p>
<p>Exemplo típico:</p>
<ul>
<li><p>fenômenos de aprendizado;</p></li>
<li><p>processos de saturação;</p></li>
<li><p>respostas que se estabilizam para grandes valores de <span class="math inline">\(X\)</span>.</p></li>
</ul>
<p>Se a relação verdadeira for aproximadamente</p>
<p><span class="math display">\[
Y = \alpha + \frac{\beta}{X},
\]</span></p>
<p>então</p>
<p><span class="math display">\[
Y = \alpha + \beta X^*
\]</span></p>
<p>com <span class="math inline">\(X^* = 1/X\)</span>.</p>
<p>A transformação inversa captura comportamentos de <strong>retorno decrescente</strong> ou aproximação assintótica.</p>
<p><strong>Gráfico sugerido:</strong></p>
<ul>
<li>Resíduos vs.&nbsp;<span class="math inline">\(X\)</span> (o que verificar: curva decrescente; resultado esperado após transformação: sem padrão).</li>
</ul>
</section>
<section id="potências-e-termos-polinomiais-x2-x3" class="level3" data-number="9.3.4">
<h3 data-number="9.3.4" class="anchored" data-anchor-id="potências-e-termos-polinomiais-x2-x3"><span class="header-section-number">9.3.4</span> Potências e termos polinomiais (<span class="math inline">\(X^2\)</span>, <span class="math inline">\(X^3\)</span>, …)</h3>
<p>Quando a relação apresenta curvatura suave, uma alternativa é expandir o modelo com termos polinomiais:</p>
<p><span class="math display">\[
Y = \beta_0 + \beta_1 X + \beta_2 X^2 + \cdots + \varepsilon.
\]</span></p>
<p>Esse modelo continua sendo linear nos parâmetros (condição essencial do MRLS), embora não seja linear em <span class="math inline">\(X\)</span>.</p>
<p>Temos então que:</p>
<ul>
<li><p><span class="math inline">\(\beta_2 &gt; 0\)</span> → concavidade para cima (convexidade).</p></li>
<li><p><span class="math inline">\(\beta_2 &lt; 0\)</span> → concavidade para baixo.</p></li>
</ul>
<p>Apesar de introduzir não linearidade em <span class="math inline">\(X\)</span>, o modelo permanece linear em relação aos parâmetros <span class="math inline">\(\beta_j\)</span>. Isso garante que:</p>
<ul>
<li><p>os estimadores de MQO continuam válidos;</p></li>
<li><p>as propriedades inferenciais permanecem as mesmas.</p></li>
</ul>
<p>Essa distinção entre <strong>linearidade nos parâmetros</strong> e <strong>linearidade na variável explicativa</strong> é conceitualmente central em regressão linear.</p>
<p><strong>Gráfico sugerido:</strong></p>
<ul>
<li>Resíduos vs.&nbsp;<span class="math inline">\(X\)</span> (o que verificar: arco ou S-curva; resultado esperado após transformação: resíduos aleatórios).</li>
</ul>
</section>
<section id="transformar-x-ou-adicionar-polinômios" class="level3" data-number="9.3.5">
<h3 data-number="9.3.5" class="anchored" data-anchor-id="transformar-x-ou-adicionar-polinômios"><span class="header-section-number">9.3.5</span> Transformar <span class="math inline">\(X\)</span> ou adicionar polinômios?</h3>
<p>Há duas estratégias principais para lidar com curvaturas:</p>
<ol type="1">
<li><p>Transformar <span class="math inline">\(X\)</span> (por exemplo, <span class="math inline">\(\log X\)</span>, <span class="math inline">\(1/X\)</span>).</p></li>
<li><p>Incluir termos polinomiais (<span class="math inline">\(X^2\)</span>, <span class="math inline">\(X^3\)</span>).</p></li>
</ol>
<p>A escolha depende de:</p>
<ul>
<li><p>coerência teórica;</p></li>
<li><p>interpretação desejada;</p></li>
<li><p>estabilidade numérica do ajuste.</p></li>
</ul>
<p>Transformações simples costumam ter interpretação mais direta; polinômios oferecem maior flexibilidade, mas podem introduzir instabilidade em extrapolações.</p>
<p>Logo, as transformações na variável explicativa:</p>
<ul>
<li>buscam linearizar a função média;</li>
<li>não alteram a estrutura probabilística da resposta;</li>
<li>preservam a estrutura básica do MRLS;</li>
<li>exigem reavaliação completa dos resíduos após o ajuste.</li>
</ul>
</section>
</section>
<section id="guia-prático-escolhendo-a-transformação" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="guia-prático-escolhendo-a-transformação"><span class="header-section-number">9.4</span> Guia prático: escolhendo a transformação</h2>
<p>Após compreender as motivações teóricas para transformar <span class="math inline">\(Y\)</span> ou <span class="math inline">\(X\)</span>, surge a questão prática: <strong>como decidir qual transformação aplicar?</strong></p>
<p>A escolha não deve ser arbitrária nem baseada apenas em melhora numérica de <span class="math inline">\(R^2\)</span>. O critério central é a adequação às hipóteses do modelo e à estrutura substantiva do fenômeno (<span class="citation" data-cites="montgomery2021">Montgomery; Peck; Vining (<a href="references.html#ref-montgomery2021" role="doc-biblioref">2021</a>)</span>; <span class="citation" data-cites="kutner2005">Kutner et al. (<a href="references.html#ref-kutner2005" role="doc-biblioref">2005</a>)</span>).</p>
<p><strong>Etapa 1 — Diagnóstico inicial</strong></p>
<p>Antes de qualquer transformação, ajusta-se o modelo na escala original:</p>
<p><span class="math display">\[
Y_i = \beta_0 + \beta_1 X_i + e_i.
\]</span></p>
<p>Em seguida, analisam-se os resíduos:</p>
<ul>
<li>Resíduos vs.&nbsp;ajustados → verificar homoscedasticidade.</li>
<li>Resíduos vs.&nbsp;<span class="math inline">\(X\)</span> → verificar linearidade.</li>
<li>QQ-plot → verificar normalidade.</li>
<li>Histograma → avaliar assimetria e caudas.</li>
</ul>
<p>A transformação deve responder a um padrão empírico específico observado nos resíduos. Se não há padrão sistemático, não há justificativa para transformar.</p>
<p><strong>Etapa 2 — Identificação do padrão</strong></p>
<p>Alguns padrões típicos e suas possíveis soluções:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 31%">
<col style="width: 27%">
<col style="width: 41%">
</colgroup>
<thead>
<tr class="header">
<th>Padrão observado</th>
<th>Possível causa</th>
<th>Transformação sugerida</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Funil (variância cresce com média)</td>
<td><span class="math inline">\(Var(Y \mid X)\)</span> proporcional à média ou ao quadrado da média</td>
<td><span class="math inline">\(\log(Y)\)</span> ou <span class="math inline">\(\sqrt{Y}\)</span></td>
</tr>
<tr class="even">
<td>Curvatura em arco</td>
<td>Relação não linear entre <span class="math inline">\(Y\)</span> e <span class="math inline">\(X\)</span></td>
<td><span class="math inline">\(X^2\)</span> ou <span class="math inline">\(\log(X)\)</span></td>
</tr>
<tr class="odd">
<td>Assimetria à direita</td>
<td>Distribuição assimétrica positiva</td>
<td><span class="math inline">\(\log(Y)\)</span></td>
</tr>
<tr class="even">
<td>Efeito forte em valores pequenos de <span class="math inline">\(X\)</span></td>
<td>Retorno decrescente</td>
<td><span class="math inline">\(1/X\)</span></td>
</tr>
</tbody>
</table>
<p>Cada transformação responde a um mecanismo estrutural distinto. Não se trata de “corrigir o gráfico”, mas de modelar melhor o processo subjacente.</p>
<p><strong>Etapa 3 — Ajuste do modelo transformado</strong></p>
<p>Após escolher a transformação, ajusta-se o novo modelo, por exemplo:</p>
<p><span class="math display">\[
\log(Y_i) = \beta_0^* + \beta_1^* X_i + \varepsilon_i,
\]</span></p>
<p>ou</p>
<p><span class="math display">\[
Y_i = \beta_0 + \beta_1 \log(X_i) + \varepsilon_i.
\]</span></p>
<p>Nesse momento, todo o ciclo de verificação deve ser repetido:</p>
<ul>
<li>análise gráfica dos resíduos;</li>
<li>testes formais (quando apropriado);</li>
<li>avaliação da coerência interpretativa.</li>
</ul>
<p><strong>Etapa 4 — Avaliação comparativa</strong></p>
<p>A comparação entre modelos deve considerar:</p>
<ol type="1">
<li>Qualidade dos resíduos (homoscedasticidade, normalidade).</li>
<li>Estabilidade dos coeficientes.</li>
<li>Interpretação substantiva.</li>
<li>Intervalos de confiança e precisão inferencial.</li>
</ol>
<p>Um modelo com menor <span class="math inline">\(R^2\)</span> pode ser preferível se satisfaz melhor as hipóteses do MRLS e apresenta resíduos estruturalmente adequados.</p>
</section>
<section id="exemplo-ilustrativo-antes-e-depois-da-transformação" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="exemplo-ilustrativo-antes-e-depois-da-transformação"><span class="header-section-number">9.5</span> Exemplo ilustrativo: antes e depois da transformação</h2>
<p>Para consolidar as ideias discutidas até aqui, apresentamos um exemplo ilustrativo que mostra, de forma integrada, a <strong>necessidade estatística</strong> e a <strong>eficácia inferencial</strong> de uma transformação na variável resposta.</p>
<section id="cenário-e-especificação-dos-modelos" class="level3" data-number="9.5.1">
<h3 data-number="9.5.1" class="anchored" data-anchor-id="cenário-e-especificação-dos-modelos"><span class="header-section-number">9.5.1</span> Cenário e especificação dos modelos</h3>
<p>Suponha que estejamos interessados em modelar a relação entre <strong>horas de prática de estudo (<span class="math inline">\(X\)</span>)</strong> e a <strong>nota obtida em uma prova (<span class="math inline">\(Y\)</span>)</strong>. Intuitivamente, espera-se que estudantes que dedicam mais horas de estudo tendam a alcançar notas maiores. Contudo, é plausível que:</p>
<ul>
<li>o ganho médio de desempenho seja aproximadamente exponencial;</li>
<li>a variabilidade das notas aumente à medida que <span class="math inline">\(X\)</span> aumenta.</li>
</ul>
<p>Essa estrutura implica que a variância condicional pode depender do nível médio da resposta, violando a hipótese de homoscedasticidade do MRLS.</p>
<p>Consideremos dois modelos concorrentes.</p>
<p><strong>Modelo A (sem transformação):</strong></p>
<p><span class="math display">\[
Y_i = \beta_0 + \beta_1 X_i + e_i.
\]</span></p>
<p>Esse modelo assume:</p>
<p><span class="math display">\[
E(Y_i \mid X_i) = \beta_0 + \beta_1 X_i,
\qquad
Var(Y_i \mid X_i) = \sigma^2.
\]</span></p>
<p><strong>Modelo B (com transformação logarítmica):</strong></p>
<p><span class="math display">\[
Y_i^* = \log(Y_i) = \beta_0^* + \beta_1^* X_i + \varepsilon_i,
\qquad
\varepsilon_i \sim \mathcal{N}(0,\sigma^2).
\]</span></p>
<p>Nesse caso, assumimos normalidade e homoscedasticidade <strong>na escala logarítmica</strong>. Implicitamente, isso significa que, na escala original,</p>
<p><span class="math display">\[
Y_i \mid X_i \sim \text{LogNormal}(\mu_i, \sigma^2),
\]</span></p>
<p>o que altera a estrutura probabilística do modelo.</p>
</section>
<section id="geração-do-conjunto-de-dados-e-análise-descritiva" class="level3" data-number="9.5.2">
<h3 data-number="9.5.2" class="anchored" data-anchor-id="geração-do-conjunto-de-dados-e-análise-descritiva"><span class="header-section-number">9.5.2</span> Geração do conjunto de dados e análise descritiva</h3>
<p>Para ilustrar essa situação, considere que a relação verdadeira é linear na escala logarítmica:</p>
<p><span class="math display">\[
\log(Y_i) = 1.0 + 0.20 X_i + u_i,
\quad
u_i \sim N(0,\sigma^2).
\]</span></p>
<p>A partir dessa equação, obtemos</p>
<p><span class="math display">\[
Y_i = \exp(1.0 + 0.20 X_i + u_i),
\]</span></p>
<p>o que gera:</p>
<ul>
<li>crescimento exponencial na média;</li>
<li>variância crescente com <span class="math inline">\(X\)</span>;</li>
<li>assimetria à direita na escala original.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">2025</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">120</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="at">length.out =</span> n)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Relação linear na escala log(Y)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fl">0.6</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>logY  <span class="ot">&lt;-</span> <span class="fl">1.0</span> <span class="sc">+</span> <span class="fl">0.20</span><span class="sc">*</span>X <span class="sc">+</span> <span class="fu">rnorm</span>(n, <span class="dv">0</span>, sigma)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>Y     <span class="ot">&lt;-</span> <span class="fu">exp</span>(logY)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">X =</span> X,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Y =</span> Y,</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">logY =</span> <span class="fu">log</span>(Y)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><strong>Estatísticas descritivas</strong></p>
<p>Devem ser apresentadas:</p>
<ul>
<li>primeiras linhas da base;</li>
<li>estatísticas resumidas para <span class="math inline">\(X\)</span>, <span class="math inline">\(Y\)</span> e <span class="math inline">\(\log(Y)\)</span>.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
       X     Y  logY
   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1 0       3.95 1.37 
2 0.0840  2.82 1.04 
3 0.168   4.47 1.50 
4 0.252   6.13 1.81 
5 0.336   3.63 1.29 
6 0.420   2.68 0.986</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>       X              Y               logY       
 Min.   : 0.0   Min.   : 1.141   Min.   :0.1318  
 1st Qu.: 2.5   1st Qu.: 4.384   1st Qu.:1.4779  
 Median : 5.0   Median : 6.833   Median :1.9217  
 Mean   : 5.0   Mean   : 9.724   Mean   :1.9833  
 3rd Qu.: 7.5   3rd Qu.:12.803   3rd Qu.:2.5497  
 Max.   :10.0   Max.   :40.396   Max.   :3.6987  </code></pre>
</div>
</div>
<p><strong>Ajuste dos modelos</strong></p>
<p>Ajustamos ambos os modelos via MQO:</p>
<ul>
<li>Modelo A: <span class="math inline">\(Y \sim X\)</span><br>
</li>
<li>Modelo B: <span class="math inline">\(\log(Y) \sim X\)</span></li>
</ul>
<p>Comparar:</p>
<ul>
<li>estimativas dos coeficientes;</li>
<li>erros-padrão;</li>
<li><span class="math inline">\(R^2\)</span>;</li>
<li>estatísticas <span class="math inline">\(t\)</span> e <span class="math inline">\(F\)</span>.</li>
</ul>
<p>Note que os <span class="math inline">\(R^2\)</span> não são diretamente comparáveis entre escalas distintas, pois medem proporções de variabilidade em espaços diferentes.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>mA <span class="ot">&lt;-</span> <span class="fu">lm</span>(Y <span class="sc">~</span> X, <span class="at">data =</span> df)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>mB <span class="ot">&lt;-</span> <span class="fu">lm</span>(logY <span class="sc">~</span> X, <span class="at">data =</span> df)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"=== MODELO A (Y ~ X) ===</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>=== MODELO A (Y ~ X) ===</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">summary</span>(mA))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Y ~ X, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-10.8050  -4.1989  -0.8159   1.8826  24.5691 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)   2.0801     1.2119   1.716   0.0887 .  
X             1.5288     0.2095   7.298 3.68e-11 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.68 on 118 degrees of freedom
Multiple R-squared:  0.311, Adjusted R-squared:  0.3052 
F-statistic: 53.27 on 1 and 118 DF,  p-value: 3.677e-11</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">=== MODELO B (logY ~ X) ===</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== MODELO B (logY ~ X) ===</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">summary</span>(mB))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = logY ~ X, data = df)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.43792 -0.41121 -0.01437  0.36590  1.62093 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  1.15379    0.10872  10.612  &lt; 2e-16 ***
X            0.16590    0.01879   8.828 1.16e-14 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.5992 on 118 degrees of freedom
Multiple R-squared:  0.3978,    Adjusted R-squared:  0.3927 
F-statistic: 77.94 on 1 and 118 DF,  p-value: 1.164e-14</code></pre>
</div>
</div>
<p><strong>ANOVA</strong></p>
<p>Apresentar as tabelas ANOVA para ambos os modelos.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">=== ANOVA — MODELO A ===</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== ANOVA — MODELO A ===</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">anova</span>(mA))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: Y
           Df Sum Sq Mean Sq F value    Pr(&gt;F)    
X           1 2376.6 2376.59  53.266 3.677e-11 ***
Residuals 118 5264.9   44.62                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">=== ANOVA — MODELO B ===</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
=== ANOVA — MODELO B ===</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">anova</span>(mB))</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Response: logY
           Df Sum Sq Mean Sq F value    Pr(&gt;F)    
X           1 27.984 27.9837  77.938 1.164e-14 ***
Residuals 118 42.368  0.3591                      
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="diagnóstico-gráfico-antes-e-depois" class="level3" data-number="9.5.3">
<h3 data-number="9.5.3" class="anchored" data-anchor-id="diagnóstico-gráfico-antes-e-depois"><span class="header-section-number">9.5.3</span> Diagnóstico gráfico: antes e depois</h3>
<p>O contraste entre os modelos deve ser avaliado por meio dos gráficos diagnósticos.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Padronização visual para TODOS os gráficos do exemplo</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>base_size <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>theme_diag <span class="ot">&lt;-</span> <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> base_size) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">strip.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"grey95"</span>, <span class="at">color =</span> <span class="cn">NA</span>),</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title.position =</span> <span class="st">"plot"</span>,</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption.position =</span> <span class="st">"plot"</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="dispersão-da-resposta-vs.-explicativa" class="level4" data-number="9.5.3.1">
<h4 data-number="9.5.3.1" class="anchored" data-anchor-id="dispersão-da-resposta-vs.-explicativa"><span class="header-section-number">9.5.3.1</span> Dispersão da resposta vs.&nbsp;explicativa</h4>
<ul>
<li>Modelo A: espera-se tendência crescente com dispersão aumentando (funil).</li>
<li>Modelo B: dispersão aproximadamente constante e relação linear clara na escala transformada.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df_plot <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(X, Y, logY) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Y, logY), <span class="at">names_to =</span> <span class="st">"resp"</span>, <span class="at">values_to =</span> <span class="st">"valor"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">resp =</span> <span class="fu">ifelse</span>(resp <span class="sc">==</span> <span class="st">"Y"</span>,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Modelo A: escala original (Y)"</span>,</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"Modelo B: escala log (log(Y))"</span>)</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_plot, <span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> valor)) <span class="sc">+</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.8</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>, <span class="at">linewidth =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>resp, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Horas de estudo (X)"</span>,</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="cn">NULL</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  theme_diag</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mrls_transf_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="1080"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resíduos-vs.-valores-ajustados" class="level4" data-number="9.5.3.2">
<h4 data-number="9.5.3.2" class="anchored" data-anchor-id="resíduos-vs.-valores-ajustados"><span class="header-section-number">9.5.3.2</span> Resíduos vs.&nbsp;valores ajustados</h4>
<ul>
<li>Modelo A: padrão de funil e possível curvatura.</li>
<li>Modelo B: resíduos aleatórios em torno de zero.</li>
</ul>
<p>A ausência de estrutura no segundo caso indica que</p>
<p><span class="math display">\[
Var(\varepsilon_i \mid X_i) \approx \sigma^2.
\]</span></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>resA <span class="ot">&lt;-</span> <span class="fu">resid</span>(mA); fitA <span class="ot">&lt;-</span> <span class="fu">fitted</span>(mA)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>resB <span class="ot">&lt;-</span> <span class="fu">resid</span>(mB); fitB <span class="ot">&lt;-</span> <span class="fu">fitted</span>(mB)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">fit =</span> fitA, <span class="at">res =</span> resA, <span class="at">painel =</span> <span class="st">"Modelo A: escala original (Y)"</span>),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">fit =</span> fitB, <span class="at">res =</span> resB, <span class="at">painel =</span> <span class="st">"Modelo B: escala log (log(Y))"</span>)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> fit, <span class="at">y =</span> res)) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.85</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">linewidth =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>painel, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Valores ajustados"</span>,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Resíduo"</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  theme_diag</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mrls_transf_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="1080"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resíduos-estudentizados-vs.-ajustados" class="level4" data-number="9.5.3.3">
<h4 data-number="9.5.3.3" class="anchored" data-anchor-id="resíduos-estudentizados-vs.-ajustados"><span class="header-section-number">9.5.3.3</span> Resíduos estudentizados vs.&nbsp;ajustados</h4>
<ul>
<li>Modelo A: maior número de pontos fora do intervalo <span class="math inline">\([-2,2]\)</span>.</li>
<li>Modelo B: poucos pontos extremos, ausência de padrão.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>studA <span class="ot">&lt;-</span> <span class="fu">rstudent</span>(mA)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>studB <span class="ot">&lt;-</span> <span class="fu">rstudent</span>(mB)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">fit =</span> fitA, <span class="at">stud =</span> studA, <span class="at">painel =</span> <span class="st">"Modelo A: escala original (Y)"</span>),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">fit =</span> fitB, <span class="at">stud =</span> studB, <span class="at">painel =</span> <span class="st">"Modelo B: escala log (log(Y))"</span>)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> fit, <span class="at">y =</span> stud)) <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.85</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">linewidth =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="dv">2</span>, <span class="dv">2</span>), <span class="at">linetype =</span> <span class="st">"dotted"</span>, <span class="at">linewidth =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>painel, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Valores ajustados"</span>,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Resíduo estudentizado (t*)"</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  theme_diag</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mrls_transf_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="1080"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="qq-plot" class="level4" data-number="9.5.3.4">
<h4 data-number="9.5.3.4" class="anchored" data-anchor-id="qq-plot"><span class="header-section-number">9.5.3.4</span> QQ-plot</h4>
<ul>
<li>Modelo A: desvios sistemáticos nas caudas.</li>
<li>Modelo B: alinhamento próximo à reta de 45°.</li>
</ul>
<p>Isso sugere que</p>
<p><span class="math display">\[
\varepsilon_i \sim N(0,\sigma^2)
\]</span></p>
<p>é plausível apenas na escala logarítmica.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>qq_df <span class="ot">&lt;-</span> <span class="cf">function</span>(r, painel){</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  q <span class="ot">&lt;-</span> <span class="fu">qqnorm</span>(r, <span class="at">plot.it =</span> <span class="cn">FALSE</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">theo =</span> q<span class="sc">$</span>x, <span class="at">samp =</span> q<span class="sc">$</span>y, <span class="at">painel =</span> painel)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">qq_df</span>(resA, <span class="st">"Modelo A: QQ-plot dos resíduos (Y)"</span>),</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">qq_df</span>(resB, <span class="st">"Modelo B: QQ-plot dos resíduos (log(Y))"</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> theo, <span class="at">y =</span> samp)) <span class="sc">+</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.85</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">slope =</span> <span class="dv">1</span>, <span class="at">linewidth =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>painel, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Quantis teóricos (Normal)"</span>,</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Quantis amostrais (resíduos)"</span></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  theme_diag</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mrls_transf_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="1080"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="histograma" class="level4" data-number="9.5.3.5">
<h4 data-number="9.5.3.5" class="anchored" data-anchor-id="histograma"><span class="header-section-number">9.5.3.5</span> Histograma</h4>
<ul>
<li>Modelo A: assimetria à direita e caudas pesadas.</li>
<li>Modelo B: simetria aproximadamente normal.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">r =</span> resA, <span class="at">painel =</span> <span class="st">"Modelo A: resíduos (Y)"</span>),</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">r =</span> resB, <span class="at">painel =</span> <span class="st">"Modelo B: resíduos (log(Y))"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> r)) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(density)),</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">14</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">alpha =</span> <span class="fl">0.7</span>,</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">linewidth =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>painel, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free"</span>) <span class="sc">+</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Resíduo"</span>,</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Densidade"</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  theme_diag</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mrls_transf_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="1080"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="resíduos-vs.-x" class="level4" data-number="9.5.3.6">
<h4 data-number="9.5.3.6" class="anchored" data-anchor-id="resíduos-vs.-x"><span class="header-section-number">9.5.3.6</span> Resíduos vs.&nbsp;<span class="math inline">\(X\)</span></h4>
<ul>
<li>Modelo A: indícios de curvatura e variância crescente.</li>
<li>Modelo B: dispersão uniforme.</li>
</ul>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">X =</span> df<span class="sc">$</span>X, <span class="at">res =</span> resA, <span class="at">painel =</span> <span class="st">"Modelo A: resíduos vs X (Y)"</span>),</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>(<span class="at">X =</span> df<span class="sc">$</span>X, <span class="at">res =</span> resB, <span class="at">painel =</span> <span class="st">"Modelo B: resíduos vs X (log(Y))"</span>)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> X, <span class="at">y =</span> res)) <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.85</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">linewidth =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>painel, <span class="at">ncol =</span> <span class="dv">2</span>, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Horas de estudo (X)"</span>,</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Resíduo"</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>  theme_diag</span></code></pre></div><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mrls_transf_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="1080"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="comparação-numérica-e-conclusão" class="level3" data-number="9.5.4">
<h3 data-number="9.5.4" class="anchored" data-anchor-id="comparação-numérica-e-conclusão"><span class="header-section-number">9.5.4</span> Comparação numérica e conclusão</h3>
<p><strong>Modelo A (escala original)</strong></p>
<ul>
<li><span class="math inline">\(R^2\)</span> aparentemente satisfatório.</li>
<li>Violação da homoscedasticidade.</li>
<li>Desvios de normalidade.</li>
<li>Inferência potencialmente comprometida.</li>
</ul>
<p><strong>Modelo B (escala logarítmica)</strong></p>
<ul>
<li>Melhor adequação estrutural dos resíduos.</li>
<li>Testes <span class="math inline">\(t\)</span> e <span class="math inline">\(F\)</span> mais confiáveis.</li>
<li>Intervalos de confiança coerentes com as hipóteses do modelo.</li>
</ul>
<p>Um modelo pode apresentar bom <span class="math inline">\(R^2\)</span> e, ainda assim, violar hipóteses fundamentais. A validade da inferência depende da adequação dos resíduos, não apenas do poder explicativo.</p>
<section id="interpretação" class="level4" data-number="9.5.4.1">
<h4 data-number="9.5.4.1" class="anchored" data-anchor-id="interpretação"><span class="header-section-number">9.5.4.1</span> Interpretação</h4>
<p>No Modelo B,</p>
<p><span class="math display">\[
\log(Y) = \beta_0^* + \beta_1^* X.
\]</span></p>
<p>Logo,</p>
<p><span class="math display">\[
Y = \exp(\beta_0^*) \exp(\beta_1^* X).
\]</span></p>
<p>O efeito de <span class="math inline">\(X\)</span> é <strong>multiplicativo</strong>:</p>
<p><span class="math display">\[
\exp(\beta_1^*)
\]</span></p>
<p>representa o fator pelo qual <span class="math inline">\(Y\)</span> é multiplicado para cada unidade adicional em <span class="math inline">\(X\)</span>.</p>
<p>Entretanto, para previsões na escala original,</p>
<p><span class="math display">\[
E(Y \mid X) = \exp\left(\mu + \tfrac{1}{2}\sigma^2\right),
\]</span></p>
<p>e não simplesmente <span class="math inline">\(\exp(\mu)\)</span> (<span class="citation" data-cites="casella2002">Casella; Berger (<a href="references.html#ref-casella2002" role="doc-biblioref">2002</a>)</span>). Ignorar esse termo introduz <strong>viés de retransformação</strong></p>
<p>Este exemplo evidencia que:</p>
<ul>
<li>a análise de resíduos é central na validação do modelo;</li>
<li>transformações podem corrigir violações estruturais;</li>
<li>a interpretação deve sempre respeitar a escala do modelo ajustado;</li>
<li>a escolha da transformação deve ser guiada por diagnóstico e fundamentação teórica.</li>
</ul>
<p>Em regressão, a forma funcional adequada é aquela que torna os resíduos compatíveis com as hipóteses do modelo — não necessariamente aquela que produz o maior <span class="math inline">\(R^2\)</span>.</p>


<div id="refs" class="references csl-bib-body" data-entry-spacing="1" role="list" style="display: none">
<div id="ref-casella2002" class="csl-entry" role="listitem">
CASELLA, George; BERGER, Roger L. <strong>Statistical Inference</strong>. 2. ed. Pacific Grove: Duxbury, 2002.
</div>
<div id="ref-kutner2005" class="csl-entry" role="listitem">
KUTNER, Michael H. <em>et al.</em> <strong>Applied Linear Statistical Models</strong>. 5. ed. New York: McGraw-Hill, 2005.
</div>
<div id="ref-montgomery2021" class="csl-entry" role="listitem">
MONTGOMERY, Douglas C.; PECK, Elizabeth A.; VINING, G. Geoffrey. <strong>Introduction to Linear Regression Analysis</strong>. 6. ed. Hoboken: John Wiley &amp; Sons, 2021.
</div>
<div id="ref-weisberg2005" class="csl-entry" role="listitem">
WEISBERG, Sanford. <strong>Applied Linear Regression</strong>. New York: Wiley, 2005.
</div>
</div>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copiada");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copiada");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./mrls_diagnostico.html" class="pagination-link" aria-label="Diagnóstico e Avaliação no MRLS">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Diagnóstico e Avaliação no MRLS</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./mrls_compara.html" class="pagination-link" aria-label="Comparação de Modelos">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Comparação de Modelos</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>